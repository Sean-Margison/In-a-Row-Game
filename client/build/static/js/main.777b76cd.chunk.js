(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{41:function(t,e,s){},43:function(t,e,s){},44:function(t,e,s){},45:function(t,e,s){},46:function(t,e,s){},78:function(t,e,s){"use strict";s.r(e);var i=s(1),n=s.n(i),a=s(35),r=s.n(a),l=(s(41),s(7)),c=s(8),o=s(10),u=s(9),h=s(0),p=function(t){Object(o.a)(s,t);var e=Object(u.a)(s);function s(t){var i;return Object(l.a)(this,s),(i=e.call(this,t)).claim=function(t){return null===i.state.player&&(i.setState({player:t}),!0)},i.state={player:null},i}return Object(c.a)(s,[{key:"componentDidMount",value:function(){this.init()}},{key:"componentDidUpdate",value:function(t){t!==this.props&&this.init()}},{key:"init",value:function(){this.setState({player:null})}},{key:"render",value:function(){return null!==this.state.player?Object(h.jsx)("div",{className:"cell ".concat(this.state.player?"black":"red")}):Object(h.jsx)("span",{className:"cell open"})}}]),s}(n.a.Component),d=function(t){Object(o.a)(s,t);var e=Object(u.a)(s);function s(t){var i;return Object(l.a)(this,s),(i=e.call(this,t)).state={cells:[]},i}return Object(c.a)(s,[{key:"componentDidMount",value:function(){this.init()}},{key:"componentDidUpdate",value:function(t){t!==this.props&&this.init()}},{key:"init",value:function(){for(var t=[],e=0;e<this.props.rows;e++)t.push(Object(h.jsx)(p,{ref:n.a.createRef(),x:this.props.x,y:e},"cell-".concat(this.props.x,"-").concat(e)));this.setState({cells:t})}},{key:"render",value:function(){var t=this;return Object(h.jsx)("div",{className:"col",onClick:function(e){return t.props.clickedColumn(t,e)},children:this.state.cells})}}]),s}(n.a.Component),m=(s(43),function(t){Object(o.a)(s,t);var e=Object(u.a)(s);function s(t){var i;return Object(l.a)(this,s),(i=e.call(this,t)).cell=function(t,e){return i.state.columns[t].ref.current.state.cells[e].ref.current},i.state={moves:0,player:!0,rows:0,columns:[],winner:null,gravity:!0,runs:0,mode:i.props.mode,multiplayer:{enabled:i.props.multiplayer,guid:i.props.guid,gameid:null,started:!1,bound:!1,turn:!1}},i}return Object(c.a)(s,[{key:"componentDidMount",value:function(){this.init()}},{key:"componentDidUpdate",value:function(t){t!==this.props&&this.init()}},{key:"init",value:function(){for(var t=this,e=[],s=0;s<this.props.cols;s++)e.push(Object(h.jsx)(d,{ref:n.a.createRef(),rows:this.props.rows,clickedColumn:this.playLocal.bind(this),index:s},"column-".concat(s)));if(this.props.multiplayer&&"create"!==this.props.mode){var i="game:"+this.props.guid,a=this.state.multiplayer;a.socket=this.props.socket,a.enabled=this.props.multiplayer,a.guid=this.props.guid,a.started=!1,a.turn=!1,this.setState({multiplayer:a}),this.props.socket.on(i,(function(e){t.props.socket.on("game:"+e.id,(function(e){return t.receiveEvent(e)})),t.props.socket.on("player:"+e.id.split("|vs|")[e.player?1:0],(function(e){return t.receiveEvent(e)})),t.props.socket.off(i);var s=t.state.multiplayer;s.gameid=e.id,s.started=!0,s.turn=e.player,t.setState({multiplayer:s})})),this.props.socket.emit("start",this.state.multiplayer.guid,this.state.mode)}this.setState({columns:e,cols:this.props.cols,rows:this.props.rows,moves:this.props.cols*this.props.rows,player:!0,winner:null,gravity:this.props.gravity,runs:this.props.runs,mode:this.props.mode})}},{key:"componentWillUnmount",value:function(){var t;this.state.multiplayer.enabled&&(this.state.multiplayer.socket.emit("forfeit",this.state.multiplayer.guid),null===(t=this.state.multiplayer.socket)||void 0===t||t.off())}},{key:"receiveEvent",value:function(t){if(t.sender!==this.state.multiplayer.guid)switch(t.event){case"played":if(t.x>=0&&t.y>=0){var e=this.state.columns[t.x].ref.current;if(null!==e&&(this.playTurn(e,t.y,!0),null===this.state.winner)){var s=this.state.multiplayer;s.turn=!0,this.setState({multiplayer:s})}}break;case"forfeit":if(null===this.state.winner){var i=this.state.multiplayer;i.turn=!0,this.setState({winner:!0,multiplayer:i})}}}},{key:"replicateTurn",value:function(t,e,s){if(this.props.socket.emit("turn-played",{id:this.state.multiplayer.gameid,data:{event:"played",x:t,y:e,sender:this.state.multiplayer.guid}}),s)this.props.socket.off();else{var i=this.state.multiplayer;i.turn=!1,this.setState({multiplayer:i})}}},{key:"playLocal",value:function(t,e){this.playTurn(t,Array.from(e.currentTarget.children).indexOf(e.target))}},{key:"playTurn",value:function(t,e,s){var i,n,a=this,r=function(t){a.state.multiplayer.enabled&&i>=0&&n>=0&&a.state.multiplayer.turn&&a.replicateTurn(i,n,t)};if(!this.state.multiplayer.enabled||this.state.multiplayer.turn||s){var l=t.state.cells;if(null!==this.state.winner)return;if(this.state.gravity){for(var c=l.length-1;c>=0;c--)if(l[c].ref.current.claim(this.state.player)){if(i=t.props.index,n=c,this.winner(t.props.index,c))return this.setState({winner:this.state.multiplayer.enabled?this.state.multiplayer.turn:this.state.player}),void r(!0);this.setState({player:!this.state.player,moves:this.state.moves-1});break}}else if(l[e]&&l[e].ref.current.claim(this.state.player)){if(i=t.props.index,n=e,this.winner(t.props.index,e))return this.setState({winner:this.state.multiplayer.enabled?this.state.multiplayer.turn:this.state.player}),void r(!0);this.setState({player:!this.state.player,moves:this.state.moves-1})}r(!1)}}},{key:"winner",value:function(t,e){var s=this,i=function(t){return t.state.player===s.state.player};return function(){for(var n=1,a=e+1;a<s.state.rows&&i(s.cell(t,a));a++)n++;for(var r=e-1;r>=0&&i(s.cell(t,r));r--)n++;return n>=s.state.runs}()||function(){for(var n=1,a=t+1;a<s.state.cols&&i(s.cell(a,e));a++)n++;for(var r=t-1;r>=0&&i(s.cell(r,e));r--)n++;return n>=s.state.runs}()||function(){for(var n=1,a={x:t,y:e};++a.x<s.state.cols&&--a.y>=0&&i(s.cell(a.x,a.y));)n++;for(a={x:t,y:e};--a.x>=0&&++a.y<s.state.rows&&i(s.cell(a.x,a.y));)n++;return n>=s.state.runs}()||function(){for(var n=1,a={x:t,y:e};--a.x>=0&&--a.y>=0&&i(s.cell(a.x,a.y));)n++;for(a={x:t,y:e};++a.x<s.state.cols&&++a.y<s.state.rows&&i(s.cell(a.x,a.y));)n++;return n>=s.state.runs}()}},{key:"render",value:function(){var t="";return this.state.multiplayer.enabled?t=this.state.multiplayer.started?null!==this.state.winner?this.state.multiplayer.turn?"YOU WIN!":"You Lost.":this.state.moves<=0?"DRAW":this.state.multiplayer.turn?"Your Turn...":"Opponent's Turn...":"Finding Opponent...":null!==this.state.winner?t=(this.state.player?"Black":"Red")+" WINS!":this.state.moves<=0&&(t="DRAW"),t.length>0&&(t=Object(h.jsx)("span",{className:"message",children:t})),Object(h.jsxs)("div",{className:this.state.multiplayer.enabled&&this.state.multiplayer.turn?"turn":"",children:[t,Object(h.jsx)("div",{id:"board",className:(this.state.player?"black":"red")+(this.state.gravity?" gravity":"")+(null!==this.state.winner?" done":""),children:this.state.columns})]})}}]),s}(n.a.Component)),y=(s(44),s(45),s(46),function(t){Object(o.a)(s,t);var e=Object(u.a)(s);function s(t){var i;return Object(l.a)(this,s),(i=e.call(this,t)).state={rows:10,cols:10,runs:4,gravity:!0,isPlaying:!1},i}return Object(c.a)(s,[{key:"custom",value:function(t){this.state.cols<0||this.state.cols>10?alert("Columns must be between 1 and 10"):this.state.rows<0||this.state.rows>10?alert("Rows must be between 1 and 10"):this.state.runs<2||this.state.runs>Math.max(this.state.cols,this.state.rows)?alert("Runs must be less than either rows or columns"):this.changeGame(this.state.cols,this.state.rows,this.state.runs,this.state.gravity,!0,t)}},{key:"componentDidMount",value:function(){this.init()}},{key:"componentDidUpdate",value:function(t){t!==this.props&&this.init()}},{key:"init",value:function(){this.setState({isPlaying:this.props.isPlaying})}},{key:"restart",value:function(t){this.props.restart(t)}},{key:"endGame",value:function(t){this.props.endGame(t)}},{key:"changeGame",value:function(t,e,s,i,n,a){this.setState({isPlaying:!0}),this.props.setGameMode(t,e,s,i,n,a),document.querySelector(".hamburger").classList.remove("is-active"),document.getElementById("menu").classList.remove("open")}},{key:"toggleMenu",value:function(t){t.currentTarget.classList.toggle("is-active"),document.getElementById("menu").classList.toggle("open")}},{key:"render",value:function(){var t=this,e=Object(h.jsxs)("div",{children:[Object(h.jsx)("h1",{children:"In-a-Row"}),Object(h.jsxs)("ul",{children:[Object(h.jsx)("li",{children:Object(h.jsxs)("label",{id:"multi",className:this.props.multiplayer?"enabled":"disabled",children:[Object(h.jsx)("span",{children:"Multiplayer"})," ",Object(h.jsx)("span",{children:this.props.multiplayer?"Online":"Offline"})]})}),Object(h.jsx)("li",{children:Object(h.jsx)("button",{onTouchEnd:function(e){return t.changeGame(7,6,4,!0,e)},onClick:function(e){return t.changeGame(7,6,4,!0,!1)},children:"Connect Four"})}),Object(h.jsx)("li",{children:Object(h.jsx)("button",{onTouchEnd:function(e){return t.changeGame(3,3,3,!1,e)},onClick:function(e){return t.changeGame(3,3,3,!1,!1)},children:"Tic-Tac-Toe"})}),Object(h.jsxs)("li",{children:[Object(h.jsx)("label",{children:"Local Custom"}),Object(h.jsxs)("ul",{className:"custom",children:[Object(h.jsxs)("li",{onChange:function(e){return t.setState({cols:e.target.value})},children:[Object(h.jsx)("label",{htmlFor:"col",children:"Columns"}),Object(h.jsx)("input",{type:"number",name:"col",min:"1",max:"10",defaultValue:"10",title:"The number of columns for the board (1-10)"})]}),Object(h.jsxs)("li",{onChange:function(e){return t.setState({rows:e.target.value})},children:[Object(h.jsx)("label",{htmlFor:"row",children:"Rows"}),Object(h.jsx)("input",{type:"number",name:"row",min:"1",max:"10",defaultValue:"10",title:"The number of rows for the board (1-10)"})]}),Object(h.jsxs)("li",{onChange:function(e){return t.setState({runs:e.target.value})},children:[Object(h.jsx)("label",{htmlFor:"run",children:"To Win"}),Object(h.jsx)("input",{type:"number",name:"run",min:"2",defaultValue:"4",title:"The number of matches in a row to win!"})]}),Object(h.jsxs)("li",{children:[Object(h.jsx)("label",{htmlFor:"checkbox",children:"Gravity"}),Object(h.jsx)("div",{children:Object(h.jsxs)("div",{id:"toggle",children:[Object(h.jsx)("input",{type:"checkbox",className:"checkbox",defaultChecked:"",onChange:function(e){return t.setState({gravity:!e.target.checked})}}),Object(h.jsx)("div",{className:"knobs"}),Object(h.jsx)("div",{className:"layer"})]})})]}),Object(h.jsx)("li",{children:Object(h.jsx)("button",{onTouchEnd:function(e){return t.custom(e)},onClick:function(e){return t.custom(e)},children:"Play Local"})})]})]})]})]}),s=Object(h.jsxs)("div",{children:[Object(h.jsx)("h1",{children:"In-a-Row"}),Object(h.jsxs)("ul",{children:[Object(h.jsx)("li",{children:Object(h.jsx)("button",{onClick:function(e){return t.restart(e)},children:"Restart"})}),Object(h.jsx)("li",{children:Object(h.jsx)("button",{onClick:function(e){return t.endGame(e)},children:"Leave Game"})})]})]});return Object(h.jsxs)("div",{className:this.state.isPlaying?"play":"start",children:[Object(h.jsx)("button",{title:"Menu",className:"hamburger hamburger--squeeze js-hamburger",onClick:function(e){return t.toggleMenu(e)},children:Object(h.jsx)("div",{className:"hamburger-box",children:Object(h.jsx)("div",{className:"hamburger-inner"})})}),Object(h.jsxs)("div",{id:"menu",children:[this.state.isPlaying?s:e,Object(h.jsxs)("span",{id:"author",children:[Object(h.jsx)("span",{children:"By:"})," Sean Margison"]})]})]})}}]),s}(n.a.Component)),b=n.a.createContext(),j=function(t){Object(o.a)(s,t);var e=Object(u.a)(s);function s(t){var i;return Object(l.a)(this,s),(i=e.call(this,t)).state={isPlaying:!1,gameOver:!1,cols:7,rows:6,runs:4,gravity:!0,isTouch:!1,mode:"",multiplayer:{socket:i.props.socket,guid:null,enabled:!1}},i}return Object(c.a)(s,[{key:"componentDidMount",value:function(){var t=this;this.state.multiplayer.socket.on("guid",(function(e){var s=t.state.multiplayer;s.enabled=!0,s.guid=e,t.setState({multiplayer:s})}))}},{key:"endGame",value:function(){var t=this.state.multiplayer;t.enabled=null!==this.state.multiplayer.socket&&null!==this.state.multiplayer.guid,this.setState({isPlaying:!1,multiplayer:t})}},{key:"restart",value:function(){this.state.multiplayer.enabled=null!==this.state.multiplayer.socket&&null!==this.state.multiplayer.guid,this.setGameMode()}},{key:"setGameMode",value:function(t,e,s,i,n,a){var r,l=a?"touchend"===a.type:this.state.isTouch;n?r="create":7===t&&6===e&&i&&4===s?r="connect":3!==t||3!==e||i||3!==s||(r="tictac"),r=r||this.state.mode;var c=this.state.multiplayer;c.enabled=null!==this.state.multiplayer.socket&&"create"!==r&&null!==this.state.multiplayer.guid,this.setState({cols:t||this.state.cols,rows:e||this.state.rows,runs:s||this.state.runs,gravity:void 0!==i?i:this.state.gravity,isPlaying:!0,isTouch:l,mode:r,multiplayer:c})}},{key:"render",value:function(){var t=this,e="";return this.state.isPlaying&&(e=Object(h.jsx)(b.Consumer,{children:function(e){return Object(h.jsx)(m,{cols:t.state.cols,rows:t.state.rows,runs:t.state.runs,mode:t.state.mode,gravity:t.state.gravity,multiplayer:t.state.multiplayer.enabled,socket:e,guid:t.state.multiplayer.guid})}})),Object(h.jsxs)("div",{id:"game",className:this.state.mode+(this.state.isTouch?" touch":"")+(this.state.multiplayer.enabled?" multi":""),children:[Object(h.jsx)("div",{className:"bg"}),Object(h.jsx)(y,{setGameMode:this.setGameMode.bind(this),isPlaying:this.state.isPlaying,endGame:this.endGame.bind(this),restart:this.restart.bind(this),multiplayer:this.state.multiplayer.enabled}),e,Object(h.jsxs)("div",{id:"logos",children:[Object(h.jsx)("img",{width:"100",alt:"React Logo",src:"https://upload.wikimedia.org/wikipedia/commons/a/a7/React-icon.svg"}),Object(h.jsx)("img",{width:"100",alt:"Node Logo",src:"https://nodejs.org/static/images/logos/nodejs-new-pantone-white.svg"}),Object(h.jsx)("img",{width:"65",alt:"Socket IO Logo",src:"https://upload.wikimedia.org/wikipedia/commons/thumb/9/96/Socket-io.svg/1024px-Socket-io.svg.png",style:{paddingLeft:15}})]})]})}}]),s}(n.a.Component),v=s(36)();r.a.render(Object(h.jsx)(b.Provider,{value:v,children:Object(h.jsx)(b.Consumer,{children:function(t){return Object(h.jsx)(j,{socket:t})}})}),document.getElementById("root"))}},[[78,1,2]]]);
//# sourceMappingURL=main.777b76cd.chunk.js.map